(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{209:function(e,r,n){"use strict";n.d(r,"a",(function(){return u})),n.d(r,"b",(function(){return d}));var t=n(0),a=n.n(t);function i(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function s(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function o(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?s(Object(n),!0).forEach((function(r){i(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function l(e,r){if(null==e)return{};var n,t,a=function(e,r){if(null==e)return{};var n,t,a={},i=Object.keys(e);for(t=0;t<i.length;t++)n=i[t],r.indexOf(n)>=0||(a[n]=e[n]);return a}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)n=i[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=a.a.createContext({}),c=function(e){var r=a.a.useContext(p),n=r;return e&&(n="function"==typeof e?e(r):o(o({},r),e)),n},u=function(e){var r=c(e.components);return a.a.createElement(p.Provider,{value:r},e.children)},m={inlineCode:"code",wrapper:function(e){var r=e.children;return a.a.createElement(a.a.Fragment,{},r)}},g=a.a.forwardRef((function(e,r){var n=e.components,t=e.mdxType,i=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=c(n),g=t,d=u["".concat(s,".").concat(g)]||u[g]||m[g]||i;return n?a.a.createElement(d,o(o({ref:r},p),{},{components:n})):a.a.createElement(d,o({ref:r},p))}));function d(e,r){var n=arguments,t=r&&r.mdxType;if("string"==typeof e||t){var i=n.length,s=new Array(i);s[0]=g;var o={};for(var l in r)hasOwnProperty.call(r,l)&&(o[l]=r[l]);o.originalType=e,o.mdxType="string"==typeof e?e:t,s[1]=o;for(var p=2;p<i;p++)s[p]=n[p];return a.a.createElement.apply(null,s)}return a.a.createElement.apply(null,n)}g.displayName="MDXCreateElement"},69:function(e,r,n){"use strict";n.r(r),n.d(r,"frontMatter",(function(){return s})),n.d(r,"metadata",(function(){return o})),n.d(r,"toc",(function(){return l})),n.d(r,"default",(function(){return c}));var t=n(3),a=n(7),i=(n(0),n(209)),s={slug:"composite",title:"\u7ed3\u6784\u578b | \u7ec4\u5408\u6a21\u5f0f",author:"Zhao chen",author_url:"https://github.com/zhaocchen",tags:[],draft:!1,description:null},o={unversionedId:"design-pattern/filter",id:"design-pattern/filter",isDocsHomePage:!1,title:"\u7ed3\u6784\u578b | \u7ec4\u5408\u6a21\u5f0f",description:"\u8fc7\u6ee4\u5668\u6a21\u5f0f\uff08Filter Pattern\uff09\u6216\u6807\u51c6\u6a21\u5f0f\uff08Criteria Pattern\uff09\u662f\u4e00\u79cd\u8bbe\u8ba1\u6a21\u5f0f",source:"@site/docs/design-pattern/filter.md",slug:"/design-pattern/composite",permalink:"/docs/design-pattern/composite",editUrl:"https://github.com/zhaocchen/zhaocchen.github.io/blob/master/docs/design-pattern/filter.md",version:"current"},l=[{value:"\u610f\u56fe",id:"\u610f\u56fe",children:[]},{value:"\u573a\u666f",id:"\u573a\u666f",children:[]},{value:"\u7f3a\u70b9",id:"\u7f3a\u70b9",children:[]},{value:"\u5b9e\u73b0",id:"\u5b9e\u73b0",children:[]}],p={toc:l};function c(e){var r=e.components,n=Object(a.a)(e,["components"]);return Object(i.b)("wrapper",Object(t.a)({},p,n,{components:r,mdxType:"MDXLayout"}),Object(i.b)("p",null,"\u8fc7\u6ee4\u5668\u6a21\u5f0f\uff08Filter Pattern\uff09\u6216\u6807\u51c6\u6a21\u5f0f\uff08Criteria Pattern\uff09\u662f\u4e00\u79cd\u8bbe\u8ba1\u6a21\u5f0f"),Object(i.b)("h3",{id:"\u610f\u56fe"},"\u610f\u56fe"),Object(i.b)("h3",{id:"\u573a\u666f"},"\u573a\u666f"),Object(i.b)("p",null,"\u5e94\u7528\uff1a"),Object(i.b)("h3",{id:"\u7f3a\u70b9"},"\u7f3a\u70b9"),Object(i.b)("h3",{id:"\u5b9e\u73b0"},"\u5b9e\u73b0"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-ts"},'// 1. \u521b\u5efa\u4e00\u4e2a\u7c7b\uff0c\u5728\u8be5\u7c7b\u4e0a\u5e94\u7528\u6807\u51c6\nclass Person {\n  private name: string;\n  private gender: string;\n  private maritalStatus: string;\n  constructor(name: string, gender: string, maritalStatus: string) {\n    this.name = name;\n    this.gender = gender;\n    this.maritalStatus = maritalStatus;\n  }\n\n  public getName(): string {\n    return this.name;\n  }\n  public getGender(): string {\n    return this.gender;\n  }\n  public getMaritalStatus(): string {\n    return this.maritalStatus;\n  }\n}\n\n// 2. \u4e3a\u6807\u51c6\uff08Criteria\uff09\u521b\u5efa\u4e00\u4e2a\u63a5\u53e3\ninterface Criteria {\n  meetCriteria(persons: Array<Person>): Array<Person>;\n}\n\n// 3. \u521b\u5efa\u5b9e\u73b0\u4e86 Criteria \u63a5\u53e3\u7684\u5b9e\u4f53\u7c7b\nclass CriteriaMale implements Criteria {\n  public meetCriteria(persons: Array<Person>): Array<Person> {\n    let malePersons: Array<Person> = new Array<Person>();\n    for (let person of persons) {\n      if (person.getGender().toLocaleUpperCase() == "MALE") {\n        malePersons.push(person);\n      }\n    }\n    return malePersons;\n  }\n}\n\nclass CriteriaFemale implements Criteria {\n  public meetCriteria(persons: Array<Person>): Array<Person> {\n    let femalePersons: Array<Person> = new Array<Person>();\n    for (let person of persons) {\n      if (person.getGender().toUpperCase() == "FEMALE") {\n        femalePersons.push(person);\n      }\n    }\n    return femalePersons;\n  }\n}\n\nclass CriteriaSingle implements Criteria {\n  public meetCriteria(persons: Array<Person>): Array<Person> {\n    let singlePersons: Array<Person> = new Array<Person>();\n    for (let person of persons) {\n      if (person.getMaritalStatus().toUpperCase() == "SINGLE") {\n        singlePersons.push(person);\n      }\n    }\n    return singlePersons;\n  }\n}\n\nclass AndCriteria implements Criteria {\n  private criteria: Criteria;\n  private otherCriteria: Criteria;\n  constructor(criteria: Criteria, otherCriteria: Criteria) {\n    this.criteria = criteria;\n    this.otherCriteria = otherCriteria;\n  }\n\n  public meetCriteria(persons: Array<Person>): Array<Person> {\n    let firstCriteriaPersons: Array<Person> = this.criteria.meetCriteria(persons);\n    return this.otherCriteria.meetCriteria(firstCriteriaPersons);\n  }\n}\n\nclass OrCriteria implements Criteria {\n  private criteria: Criteria;\n  private otherCriteria: Criteria;\n  constructor(criteria: Criteria, otherCriteria: Criteria) {\n    this.criteria = criteria;\n    this.otherCriteria = otherCriteria;\n  }\n\n  public meetCriteria(persons: Array<Person>): Array<Person> {\n    let firstCriteriaItems: Array<Person> = this.criteria.meetCriteria(persons);\n    let otherCriteriaItems: Array<Person> = this.otherCriteria.meetCriteria(persons);\n    for (let person of otherCriteriaItems) {\n      if (!firstCriteriaItems.includes(person)) {\n        firstCriteriaItems.push(person);\n      }\n    }\n    return firstCriteriaItems;\n  }\n}\n\n// 4. \u4f7f\u7528\u4e0d\u540c\u7684\u6807\u51c6\uff08Criteria\uff09\u548c\u5b83\u4eec\u7684\u7ed3\u5408\u6765\u8fc7\u6ee4 Person \u5bf9\u8c61\u7684\u5217\u8868\nclass CriteriaPatternDemo {\n  constructor(args: string[]) {\n    let persons: Array<Person> = new Array<Person>();\n    persons.push(new Person("Robert", "Male", "Single"));\n    persons.push(new Person("John", "Male", "Married"));\n    persons.push(new Person("Laura", "Female", "Married"));\n    persons.push(new Person("Diana", "Female", "Single"));\n    persons.push(new Person("Mike", "Male", "Single"));\n    persons.push(new Person("Bobby", "Male", "Single"));\n\n    let male: Criteria = new CriteriaMale();\n    let female: Criteria = new CriteriaFemale();\n    let single: Criteria = new CriteriaSingle();\n    let singleMale: Criteria = new AndCriteria(single, male);\n    let singleOrFemale: Criteria = new OrCriteria(single, female);\n\n    console.log("Males: ");\n    CriteriaPatternDemo.printPersons(male.meetCriteria(persons));\n\n    console.log("\\nFemales: ");\n    CriteriaPatternDemo.printPersons(female.meetCriteria(persons));\n\n    console.log("\\nSingle Males: ");\n    CriteriaPatternDemo.printPersons(singleMale.meetCriteria(persons));\n\n    console.log("\\nSingle Or Females: ");\n    CriteriaPatternDemo.printPersons(singleOrFemale.meetCriteria(persons));\n  }\n\n  public static printPersons(persons: Array<Person>): void {\n    for (let person of persons) {\n      console.log("Person : [ Name : " + person.getName()\n        + ", Gender : " + person.getGender()\n        + ", Marital Status : " + person.getMaritalStatus()\n        + " ]");\n    }\n  }\n}\n')),Object(i.b)("p",null,"\u6d4b\u8bd5"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-ts"},"new CriteriaPatternDemo([]);\n// Males: \n// Person : [ Name : Robert, Gender : Male, Marital Status : Single ]\n// Person : [ Name : John, Gender : Male, Marital Status : Married ]\n// Person : [ Name : Mike, Gender : Male, Marital Status : Single ]\n// Person : [ Name : Bobby, Gender : Male, Marital Status : Single ]\n\n// Females: \n// Person : [ Name : Laura, Gender : Female, Marital Status : Married ]\n// Person : [ Name : Diana, Gender : Female, Marital Status : Single ]\n\n// Single Males: \n// Person : [ Name : Robert, Gender : Male, Marital Status : Single ]\n// Person : [ Name : Mike, Gender : Male, Marital Status : Single ]\n// Person : [ Name : Bobby, Gender : Male, Marital Status : Single ]\n\n// Single Or Females: \n// Person : [ Name : Robert, Gender : Male, Marital Status : Single ]\n// Person : [ Name : Diana, Gender : Female, Marital Status : Single ]\n// Person : [ Name : Mike, Gender : Male, Marital Status : Single ]\n// Person : [ Name : Bobby, Gender : Male, Marital Status : Single ]\n// Person : [ Name : Laura, Gender : Female, Marital Status : Married ]\n")),Object(i.b)("p",null,"$ ts-node index.ts"),Object(i.b)("p",null,"\ud83d\udce2tsconfig.json"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-json"},'"lib": ["esnext", "dom"]\n')))}c.isMDXComponent=!0}}]);