(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{209:function(e,r,n){"use strict";n.d(r,"a",(function(){return d})),n.d(r,"b",(function(){return h}));var t=n(0),i=n.n(t);function a(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function o(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function l(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?o(Object(n),!0).forEach((function(r){a(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function c(e,r){if(null==e)return{};var n,t,i=function(e,r){if(null==e)return{};var n,t,i={},a=Object.keys(e);for(t=0;t<a.length;t++)n=a[t],r.indexOf(n)>=0||(i[n]=e[n]);return i}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)n=a[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var u=i.a.createContext({}),s=function(e){var r=i.a.useContext(u),n=r;return e&&(n="function"==typeof e?e(r):l(l({},r),e)),n},d=function(e){var r=s(e.components);return i.a.createElement(u.Provider,{value:r},e.children)},p={inlineCode:"code",wrapper:function(e){var r=e.children;return i.a.createElement(i.a.Fragment,{},r)}},b=i.a.forwardRef((function(e,r){var n=e.components,t=e.mdxType,a=e.originalType,o=e.parentName,u=c(e,["components","mdxType","originalType","parentName"]),d=s(n),b=t,h=d["".concat(o,".").concat(b)]||d[b]||p[b]||a;return n?i.a.createElement(h,l(l({ref:r},u),{},{components:n})):i.a.createElement(h,l({ref:r},u))}));function h(e,r){var n=arguments,t=r&&r.mdxType;if("string"==typeof e||t){var a=n.length,o=new Array(a);o[0]=b;var l={};for(var c in r)hasOwnProperty.call(r,c)&&(l[c]=r[c]);l.originalType=e,l.mdxType="string"==typeof e?e:t,o[1]=l;for(var u=2;u<a;u++)o[u]=n[u];return i.a.createElement.apply(null,o)}return i.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"},80:function(e,r,n){"use strict";n.r(r),n.d(r,"frontMatter",(function(){return o})),n.d(r,"metadata",(function(){return l})),n.d(r,"toc",(function(){return c})),n.d(r,"default",(function(){return s}));var t=n(3),i=n(7),a=(n(0),n(209)),o={slug:"flyweight",title:"\u7ed3\u6784\u578b | \u4eab\u5143\u6a21\u5f0f",author:"Zhao chen",author_url:"https://github.com/zhaocchen",tags:[],draft:!1,description:null},l={unversionedId:"design-pattern/flyweight",id:"design-pattern/flyweight",isDocsHomePage:!1,title:"\u7ed3\u6784\u578b | \u4eab\u5143\u6a21\u5f0f",description:"Flyweight Pattern (\u4eab\u5143\u6a21\u5f0f)\uff0c \u4e3b\u8981\u7528\u4e8e\u51cf\u5c11\u521b\u5efa\u5bf9\u8c61\u7684\u6570\u91cf\uff0c \u4ee5\u51cf\u5c11\u5185\u5b58\u5360\u7528\u548c\u63d0\u9ad8\u6027\u80fd\u3002",source:"@site/docs/design-pattern/flyweight.md",slug:"/design-pattern/flyweight",permalink:"/docs/design-pattern/flyweight",editUrl:"https://github.com/zhaocchen/zhaocchen.github.io/blob/master/docs/design-pattern/flyweight.md",version:"current",sidebar:"docs",previous:{title:"\u7ed3\u6784\u578b | \u5916\u89c2\u6a21\u5f0f",permalink:"/docs/design-pattern/facade"},next:{title:"\u7ed3\u6784\u578b | \u4ee3\u7406\u6a21\u5f0f",permalink:"/docs/design-pattern/proxy"}},c=[{value:"\u9898\u56fe",id:"\u9898\u56fe",children:[]},{value:"\u573a\u666f",id:"\u573a\u666f",children:[]},{value:"\u7f3a\u70b9",id:"\u7f3a\u70b9",children:[]},{value:"\u5b9e\u73b0",id:"\u5b9e\u73b0",children:[]}],u={toc:c};function s(e){var r=e.components,n=Object(i.a)(e,["components"]);return Object(a.b)("wrapper",Object(t.a)({},u,n,{components:r,mdxType:"MDXLayout"}),Object(a.b)("p",null,"Flyweight Pattern (\u4eab\u5143\u6a21\u5f0f)\uff0c \u4e3b\u8981\u7528\u4e8e\u51cf\u5c11\u521b\u5efa\u5bf9\u8c61\u7684\u6570\u91cf\uff0c \u4ee5\u51cf\u5c11\u5185\u5b58\u5360\u7528\u548c\u63d0\u9ad8\u6027\u80fd\u3002"),Object(a.b)("h3",{id:"\u9898\u56fe"},"\u9898\u56fe"),Object(a.b)("p",null,"\u901a\u8fc7\u5171\u4eab\u591a\u4e2a\u5bf9\u8c61\u6240\u5171\u6709\u7684\u76f8\u540c\u72b6\u6001\uff0c \u8ba9\u6709\u9650\u7684\u5185\u5b58\u5bb9\u91cf\u4e2d\u8f7d\u5165\u66f4\u591a\u5bf9\u8c61\u3002"),Object(a.b)("h3",{id:"\u573a\u666f"},"\u573a\u666f"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"\u6570\u91cf\u5de8\u5927\u7684\u76f8\u4f3c\u5bf9\u8c61"),Object(a.b)("li",{parentName:"ul"},"\u8bbe\u5907\u5185\u5b58\u6709\u9650"),Object(a.b)("li",{parentName:"ul"},"\u5bf9\u8c61\u4e2d\u5305\u542b\u53ef\u62bd\u53d6\u4e14\u80fd\u5728\u591a\u4e2a\u5bf9\u8c61\u95f4\u5171\u4eab\u7684\u91cd\u590d\u72b6\u6001")),Object(a.b)("p",null,"\u5e94\u7528\uff1a"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"\u6570\u636e\u5e93\u8fde\u63a5\u6c60")),Object(a.b)("h3",{id:"\u7f3a\u70b9"},"\u7f3a\u70b9"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"\u7cfb\u7edf\u590d\u6742\u5ea6\u63d0\u9ad8"),Object(a.b)("li",{parentName:"ul"},"\u8bfb\u53d6\u5916\u5916\u90e8\u72b6\u6001\u8fd0\u884c\u65f6\u95f4\u53d8\u957f")),Object(a.b)("h3",{id:"\u5b9e\u73b0"},"\u5b9e\u73b0"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-ts"},'//  1. \u521b\u5efa\u4e00\u4e2a\u63a5\u53e3\ninterface Shape {\n  draw(): void;\n}\n\n//  2. \u521b\u5efa\u5b9e\u73b0\u63a5\u53e3\u7684\u5b9e\u4f53\u7c7b\nclass Circle implements Shape {\n  private color: string;\n  private x: number = 0;\n  private y: number = 0;\n  private radius: number = 0;\n\n  constructor(color: string) {\n    this.color = color;\n  }\n\n  public setX(x: number): void {\n    this.x = x;\n  }\n\n  public setY(y: number): void {\n    this.y = y;\n  }\n\n  public setRadius(radius: number): void {\n    this.radius = radius;\n  }\n\n  public draw(): void {\n    console.log(\n      "Circle: Draw() [Color : " +\n        this.color +\n        ", x : " +\n        this.x +\n        ", y :" +\n        this.y +\n        ", radius :" +\n        this.radius\n    );\n  }\n}\n\n// 3. \u521b\u5efa\u4e00\u4e2a\u5de5\u5382\uff0c\u751f\u6210\u57fa\u4e8e\u7ed9\u5b9a\u4fe1\u606f\u7684\u5b9e\u4f53\u7c7b\u7684\u5bf9\u8c61\nclass ShapeFactory {\n  private static circleMap = new Map<string, Shape>();\n\n  public static getCircle(color: string): Shape {\n    let circle: Circle = <Circle>this.circleMap.get(color);\n\n    if (circle == null) {\n      circle = new Circle(color);\n      this.circleMap.set(color, circle);\n      console.log("Creating circle of color : " + color);\n    }\n    return circle;\n  }\n}\n')),Object(a.b)("p",null,"\u6d4b\u8bd5"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-ts"},'//  4. \u4f7f\u7528\u8be5\u5de5\u5382\uff0c\u901a\u8fc7\u4f20\u9012\u989c\u8272\u4fe1\u606f\u6765\u83b7\u53d6\u5b9e\u4f53\u7c7b\u7684\u5bf9\u8c61\nclass FlyweightPatternDemo {\n  private static colors: string[] = ["Red", "Green", "Blue", "White", "Black"];\n  constructor() {\n    for (let i: number = 0; i < 20; ++i) {\n      let circle: Circle = <Circle>(\n        ShapeFactory.getCircle(FlyweightPatternDemo.getRandomColor())\n      );\n      circle.setX(FlyweightPatternDemo.getRandomX());\n      circle.setY(FlyweightPatternDemo.getRandomY());\n      circle.setRadius(100);\n      circle.draw();\n    }\n  }\n\n  private static getRandomColor(): string {\n    return this.colors[Math.floor(Math.random() * this.colors.length)];\n  }\n\n  private static getRandomX(): number {\n    return Math.floor(Math.random() * 100);\n  }\n\n  private static getRandomY(): number {\n    return Math.floor(Math.random() * 100);\n  }\n}\n//  test\nnew FlyweightPatternDemo();\n\n// Creating circle of color : Green\n// Circle: Draw() [Color : Green, x : 37, y :72, radius :100\n// Creating circle of color : Blue\n// Circle: Draw() [Color : Blue, x : 9, y :87, radius :100\n// Creating circle of color : White\n// Circle: Draw() [Color : White, x : 24, y :77, radius :100\n// Circle: Draw() [Color : Green, x : 56, y :71, radius :100\n// Circle: Draw() [Color : White, x : 84, y :92, radius :100\n// Circle: Draw() [Color : Green, x : 37, y :36, radius :100\n// Creating circle of color : Black\n// Circle: Draw() [Color : Black, x : 85, y :1, radius :100\n// Creating circle of color : Red\n// Circle: Draw() [Color : Red, x : 74, y :57, radius :100\n// Circle: Draw() [Color : Green, x : 75, y :91, radius :100\n// Circle: Draw() [Color : Blue, x : 85, y :9, radius :100\n// Circle: Draw() [Color : Blue, x : 94, y :17, radius :100\n// Circle: Draw() [Color : Black, x : 32, y :64, radius :100\n// Circle: Draw() [Color : White, x : 89, y :26, radius :100\n// Circle: Draw() [Color : Green, x : 63, y :90, radius :100\n// Circle: Draw() [Color : Red, x : 20, y :15, radius :100\n// Circle: Draw() [Color : Red, x : 54, y :57, radius :100\n// Circle: Draw() [Color : White, x : 26, y :94, radius :100\n// Circle: Draw() [Color : Green, x : 99, y :64, radius :100\n// Circle: Draw() [Color : Green, x : 64, y :29, radius :100\n// Circle: Draw() [Color : Black, x : 20, y :46, radius :100\n')))}s.isMDXComponent=!0}}]);