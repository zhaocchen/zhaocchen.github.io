(window.webpackJsonp=window.webpackJsonp||[]).push([[75],{145:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return o})),t.d(n,"metadata",(function(){return p})),t.d(n,"toc",(function(){return l})),t.d(n,"default",(function(){return s}));var r=t(3),a=t(7),c=(t(0),t(209)),o={slug:"prototype",title:"\u521b\u5efa\u578b | \u539f\u578b\u6a21\u5f0f",author:"Zhao chen",author_url:"https://github.com/zhaocchen",tags:[],draft:!1,description:null},p={unversionedId:"design-pattern/prototype",id:"design-pattern/prototype",isDocsHomePage:!1,title:"\u521b\u5efa\u578b | \u539f\u578b\u6a21\u5f0f",description:"\u610f\u56fe",source:"@site/docs/design-pattern/prototype.md",slug:"/design-pattern/prototype",permalink:"/docs/design-pattern/prototype",editUrl:"https://github.com/zhaocchen/zhaocchen.github.io/blob/master/docs/design-pattern/prototype.md",version:"current",sidebar:"docs",previous:{title:"\u521b\u5efa\u578b | \u751f\u6210\u5668\u6a21\u5f0f",permalink:"/docs/design-pattern/builder"},next:{title:"\u7ed3\u6784\u578b | \u9002\u914d\u5668\u6a21\u5f0f",permalink:"/docs/design-pattern/adapter"}},l=[{value:"\u610f\u56fe",id:"\u610f\u56fe",children:[]},{value:"\u573a\u666f",id:"\u573a\u666f",children:[]},{value:"\u7f3a\u70b9",id:"\u7f3a\u70b9",children:[]},{value:"\u5b9e\u73b0",id:"\u5b9e\u73b0",children:[]},{value:"\u7b80\u5355\u5b9e\u73b0",id:"\u7b80\u5355\u5b9e\u73b0",children:[]}],i={toc:l};function s(e){var n=e.components,t=Object(a.a)(e,["components"]);return Object(c.b)("wrapper",Object(r.a)({},i,t,{components:n,mdxType:"MDXLayout"}),Object(c.b)("h3",{id:"\u610f\u56fe"},"\u610f\u56fe"),Object(c.b)("p",null,"\u539f\u578b\u5b9e\u4f8b\u6307\u5b9a\u521b\u5efa\u5bf9\u8c61\u7684\u79cd\u7c7b\uff0c\u5e76\u4e14\u901a\u8fc7\u62f7\u8d1d\u8fd9\u4e9b\u539f\u578b\u5bf9\u8c61\u521b\u5efa\u65b0\u7684\u5bf9\u8c61\u3002"),Object(c.b)("h3",{id:"\u573a\u666f"},"\u573a\u666f"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},"\u9700\u8981\u590d\u5236\u4e00\u4e2a\u5bf9\u8c61\uff0c \u540c\u4e8b\u5e0c\u671b\u4ee3\u7801\u72ec\u7acb\u4e8e\u8fd9\u4e9b\u5bf9\u8c61\u6240\u5c5e\u7684\u5177\u4f53\u7c7b"),Object(c.b)("li",{parentName:"ul"},"\u5b50\u7c7b\u7684\u533a\u522b\u4ec5\u5728\u4e8e\u5176\u5bf9\u8c61\u7684\u521d\u59cb\u5316\u65b9\u5f0f")),Object(c.b)("p",null,"\u5e94\u7528\uff1a"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"js\u4e2d\u7684\u539f\u578b\u7ee7\u627f")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"java\u4e2d\u7684Object clone() \u65b9\u6cd5")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"\u7ec6\u80de\u5206\u88c2"))),Object(c.b)("h3",{id:"\u7f3a\u70b9"},"\u7f3a\u70b9"),Object(c.b)("p",null,"\u514b\u9686\u5305\u542b\u5faa\u73af\u5f15\u7528\u7684\u590d\u6742\u5bf9\u8c61\u53ef\u80fd\u4f1a\u975e\u5e38\u9ebb\u70e6"),Object(c.b)("h3",{id:"\u5b9e\u73b0"},"\u5b9e\u73b0"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-ts"},'interface Cloneable {\n clone(): Cloneable;\n }\n \n // 1. \u521b\u5efa\u4e00\u4e2a\u5b9e\u73b0\u4e86 Cloneable \u63a5\u53e3\u7684\u62bd\u8c61\u7c7b\n abstract class Shape implements Cloneable {\n private id!: string;\n protected type!: string;\n \n abstract draw(): void;\n \n public getType(): string {\n  return this.type;\n }\n \n public getId(): string {\n  return this.id;\n }\n \n public setId(id: string): void {\n  this.id = id;\n }\n \n public clone(): Cloneable {\n  return Object.create(this);\n }\n }\n \n // 2. \u521b\u5efa\u6269\u5c55\u4e86\u4e0a\u9762\u62bd\u8c61\u7c7b\u7684\u5b9e\u4f53\u7c7b\n class Rectangle extends Shape {\n constructor() {\n  super()\n  this.type = "Rectangle";\n }\n \n public draw(): void {\n  console.log("Inside Rectangle::draw() method.");\n }\n }\n \n class Square extends Shape {\n constructor() {\n  super()\n  this.type = "Square";\n }\n \n public draw(): void {\n  console.log("Inside Square::draw() method.");\n }\n }\n \n class Circle extends Shape {\n constructor() {\n  super()\n  this.type = "Circle";\n }\n \n public draw(): void {\n  console.log("Inside Circle::draw() method.");\n }\n }\n \n // 3. \u521b\u5efa\u4e00\u4e2a\u7c7b\uff0c\u4ece\u6570\u636e\u5e93\u83b7\u53d6\u5b9e\u4f53\u7c7b\uff0c\u5e76\u628a\u5b83\u4eec\u5b58\u50a8\u5728\u4e00\u4e2a Hashtable \u4e2d\n class ShapeCache {\n private static shapeMap: Map<String, Shape> = new Map<String, Shape>();\n \n public static getShape(shapeId: string): Shape {\n  let cachedShape: Shape = <Shape>this.shapeMap.get(shapeId);\n  return <Shape>cachedShape.clone();\n }\n \n // \u5bf9\u6bcf\u79cd\u5f62\u72b6\u90fd\u8fd0\u884c\u6570\u636e\u5e93\u67e5\u8be2\uff0c\u5e76\u521b\u5efa\u8be5\u5f62\u72b6\n // shapeMap.put(shapeKey, shape);\n // \u4f8b\u5982\uff0c\u6211\u4eec\u8981\u6dfb\u52a0\u4e09\u79cd\u5f62\u72b6\n public static loadCache(): void {\n  let circle: Circle = new Circle();\n  circle.setId("1");\n  this.shapeMap.set(circle.getId(), circle);\n \n  let square: Square = new Square();\n  square.setId("2");\n  this.shapeMap.set(square.getId(), square);\n \n  let rectangle: Rectangle = new Rectangle();\n  rectangle.setId("3");\n  this.shapeMap.set(rectangle.getId(), rectangle);\n }\n }\n')),Object(c.b)("p",null,"\u6d4b\u8bd5"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-ts"},'// 4. PrototypePatternDemo \u4f7f\u7528 ShapeCache \u7c7b\u6765\u83b7\u53d6\u5b58\u50a8\u5728 Hashtable \u4e2d\u7684\u5f62\u72b6\u7684\u514b\u9686\nclass PrototypePatternDemo {\n constructor() {\n  ShapeCache.loadCache();\n \n  let clonedShape: Shape = <Shape>ShapeCache.getShape("1");\n  console.log("Shape : " + clonedShape.getType());\n \n  let clonedShape2: Shape = <Shape>ShapeCache.getShape("2");\n  console.log("Shape : " + clonedShape2.getType());\n \n  let clonedShape3: Shape = <Shape>ShapeCache.getShape("3");\n  console.log("Shape : " + clonedShape3.getType());\n }\n }\n \n new PrototypePatternDemo();\n // Shape : Circle\n // Shape : Square\n // Shape : Rectangle\n')),Object(c.b)("h3",{id:"\u7b80\u5355\u5b9e\u73b0"},"\u7b80\u5355\u5b9e\u73b0"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-ts"},'interface Prototype {\n clone(): Prototype;\n}\n\nclass Person implements Prototype {\n public name: string;\n public sex: string;\n public age: number;\n constructor() {\n  this.name = "Jack";\n  this.sex = "female";\n  this.age = 20;\n }\n\n public getDiscription(): string {\n  return `\u540d\u5b57\u53eb${this.name},\u6027\u522b${this.sex},\u5e74\u9f84${this.age}`;\n }\n\n // \u5b9e\u73b0\u590d\u5236\n public clone(): Prototype {\n  return Object.create(this);\n }\n}\n\n// \u4f7f\u7528\nconst person = new Person();\nconsole.log(person.getDiscription());\nperson.age = 36;\nconst p1 = Object.create(person);\nconsole.log(p1.getDiscription());\n\n// \u540d\u5b57\u53ebJack,\u6027\u522bfemale,\u5e74\u9f8420\n// \u540d\u5b57\u53ebJack,\u6027\u522bfemale,\u5e74\u9f8436\n')))}s.isMDXComponent=!0},209:function(e,n,t){"use strict";t.d(n,"a",(function(){return u})),t.d(n,"b",(function(){return b}));var r=t(0),a=t.n(r);function c(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){c(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)t=c[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)t=c[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var i=a.a.createContext({}),s=function(e){var n=a.a.useContext(i),t=n;return e&&(t="function"==typeof e?e(n):p(p({},n),e)),t},u=function(e){var n=s(e.components);return a.a.createElement(i.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return a.a.createElement(a.a.Fragment,{},n)}},h=a.a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,c=e.originalType,o=e.parentName,i=l(e,["components","mdxType","originalType","parentName"]),u=s(t),h=r,b=u["".concat(o,".").concat(h)]||u[h]||d[h]||c;return t?a.a.createElement(b,p(p({ref:n},i),{},{components:t})):a.a.createElement(b,p({ref:n},i))}));function b(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var c=t.length,o=new Array(c);o[0]=h;var p={};for(var l in n)hasOwnProperty.call(n,l)&&(p[l]=n[l]);p.originalType=e,p.mdxType="string"==typeof e?e:r,o[1]=p;for(var i=2;i<c;i++)o[i]=t[i];return a.a.createElement.apply(null,o)}return a.a.createElement.apply(null,t)}h.displayName="MDXCreateElement"}}]);